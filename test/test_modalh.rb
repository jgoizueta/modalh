require 'helper'

class TestModalh < Test::Unit::TestCase
  should "group digits with a delimiter" do
    assert_equal "123.456", H.to(123.456, :delimiter=>',')
    assert_equal "123", H.to(123.0, :delimiter=>',')
    assert_equal "123", H.to(123, :delimiter=>',')
    assert_equal "12.456", H.to(12.456, :delimiter=>',')
    assert_equal "1.456", H.to(1.456, :delimiter=>',')
    assert_equal "1", H.to(1, :delimiter=>',')
    assert_equal "1", H.to(1.0, :delimiter=>',')
    assert_equal "1,234.567", H.to(1234.567, :delimiter=>',')
    assert_equal "41,234.567", H.to(41234.567, :delimiter=>',')
    assert_equal "241,234.567", H.to(241234.567, :delimiter=>',')
    assert_equal "3,241,234.567", H.to(3241234.567, :delimiter=>',')
    assert_equal "3,241,234", H.to(3241234.0, :delimiter=>',')
    assert_equal "3,241,234", H.to(3241234, :delimiter=>',')
    assert_equal "-123.456", H.to(-123.456, :delimiter=>',')
    assert_equal "-123", H.to(-123.0, :delimiter=>',')
    assert_equal "-123", H.to(-123, :delimiter=>',')
    assert_equal "-12.456", H.to(-12.456, :delimiter=>',')
    assert_equal "-1.456", H.to(-1.456, :delimiter=>',')
    assert_equal "-1", H.to(-1, :delimiter=>',')
    assert_equal "-1", H.to(-1.0, :delimiter=>',')
    assert_equal "-1,234.567", H.to(-1234.567, :delimiter=>',')
    assert_equal "-41,234.567", H.to(-41234.567, :delimiter=>',')
    assert_equal "-241,234.567", H.to(-241234.567, :delimiter=>',')
    assert_equal "-3,241,234.567", H.to(-3241234.567, :delimiter=>',')
    assert_equal "-3,241,234", H.to(-3241234.0, :delimiter=>',')
    assert_equal "-3,241,234", H.to(-3241234, :delimiter=>',')
  end

  should "group digits with a delimiter and round" do
    assert_equal "123.46", H.to(123.456, :delimiter=>',', :precision=>2)
    assert_equal "123.00", H.to(123.0, :delimiter=>',', :precision=>2)
    assert_equal "123.00", H.to(123, :delimiter=>',', :precision=>2)
    assert_equal "12.46", H.to(12.456, :delimiter=>',', :precision=>2)
    assert_equal "1.46", H.to(1.456, :delimiter=>',', :precision=>2)
    assert_equal "1.00", H.to(1, :delimiter=>',', :precision=>2)
    assert_equal "1.00", H.to(1.0, :delimiter=>',', :precision=>2)
    assert_equal "1,234.57", H.to(1234.567, :delimiter=>',', :precision=>2)
    assert_equal "41,234.57", H.to(41234.567, :delimiter=>',', :precision=>2)
    assert_equal "241,234.57", H.to(241234.567, :delimiter=>',', :precision=>2)
    assert_equal "3,241,234.57", H.to(3241234.567, :delimiter=>',', :precision=>2)
    assert_equal "3,241,234.00", H.to(3241234.0, :delimiter=>',', :precision=>2)
    assert_equal "3,241,234.00", H.to(3241234, :delimiter=>',', :precision=>2)
    assert_equal "-123.46", H.to(-123.456, :delimiter=>',', :precision=>2)
    assert_equal "-123.00", H.to(-123.0, :delimiter=>',', :precision=>2)
    assert_equal "-123.00", H.to(-123, :delimiter=>',', :precision=>2)
    assert_equal "-12.46", H.to(-12.456, :delimiter=>',', :precision=>2)
    assert_equal "-1.46", H.to(-1.456, :delimiter=>',', :precision=>2)
    assert_equal "-1.00", H.to(-1, :delimiter=>',', :precision=>2)
    assert_equal "-1.00", H.to(-1.0, :delimiter=>',', :precision=>2)
    assert_equal "-1,234.57", H.to(-1234.567, :delimiter=>',', :precision=>2)
    assert_equal "-41,234.57", H.to(-41234.567, :delimiter=>',', :precision=>2)
    assert_equal "-241,234.57", H.to(-241234.567, :delimiter=>',', :precision=>2)
    assert_equal "-3,241,234.57", H.to(-3241234.567, :delimiter=>',', :precision=>2)
    assert_equal "-3,241,234.00", H.to(-3241234.0, :delimiter=>',', :precision=>2)
    assert_equal "-3,241,234.00", H.to(-3241234, :delimiter=>',', :precision=>2)
    assert_equal "123.400", H.to(123.4, :delimiter=>',', :precision=>3)
  end

  should "parse numbers with delimiters" do
    assert_equal 123.456, H.from("123.456", :type=>Float, :delimiter=>',')
    assert_equal 123.0, H.from("123", :type=>Float, :delimiter=>',')
    assert_equal 123.0, H.from("123.0", :type=>Float, :delimiter=>',')
    assert_equal 123, H.from("123", :type=>Integer, :delimiter=>',')
    assert_equal 123, H.from("123.0", :type=>Integer, :delimiter=>',')
    assert_equal 12.456, H.from("12.456", :delimiter=>',')
    assert_equal 1.456, H.from("1.456", :delimiter=>',')
    assert_equal 1.0, H.from("1", :delimiter=>',')
    assert_equal 1234.567, H.from("1,234.567", :delimiter=>',')
    assert_equal 1234.567, H.from("1234.567", :delimiter=>',')
    assert_equal 41234.567, H.from("41,234.567", :delimiter=>',')
    assert_equal 241234.567, H.from("241,234.567", :delimiter=>',')
    assert_equal -123.456, H.from("-123.456", :delimiter=>',')
    assert_equal -123.0, H.from("-123.0", :delimiter=>',')
    assert_equal -123.0, H.from("-123", :delimiter=>',')
    assert_equal -12.456, H.from("-12.456", :delimiter=>',')
    assert_equal -1234.567, H.from("-1,234.567", :delimiter=>',')
  end

end
